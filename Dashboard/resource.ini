[Rainmeter]
Update=1000
AccurateText=1
RIghtMOuseUpAction=[!SkinCustomMenu]
ContextTitle=Refresh
ContextAction=[!Refresh]
ContextTitle2=Settings
ContextAction2=[!ActivateConfig "PowerToys+\@settings" "dashboard.ini"][!UpdateMeasure Unload]
SkinWidth=#GlobalW#
SkinHeight=#GlobalH#
OnRefreshAction=!WriteKeyValue #CURRENTCONFIG# Active 0 "%APPDATA%\Rainmeter\Rainmeter.ini"

[Variables]
@includeCommon=resource\Common.inc
barhandler=1
current=RAM

[SectionHeader]
text=Resource usage
[WinIcon]
ImageName=#@#icons\#IconPack#\resource.png
[date]
StringAlign=Right

;///////////////////////////////////////////////////////////////////////////////////////////////////
;                                              content
;///////////////////////////////////////////////////////////////////////////////////////////////////

;;=====================================
;; bars                                                                                                  
;;=====================================

[RAMBox]
MEter=Shape
X=(25*#scale#)
Y=(60*#scale#)r
Container=container
Shape=Rectangle 0,0,(#globalw#-50*#scale#),(40*#Scale#),(#Corner#*5),(#Corner#*5) | StrokeWidth 0 | Extend This
Shape2=Rectangle 0,0,((#GlobalW#-(25*#scale#)*2-1)*[MeasureUsedPercent:]*0.01),(40*#Scale#),(#Corner#*5),(#Corner#*5) | Fill Color #DarkColor#,(#Alpha#*0.3) | StrokeWidth 0
this=Fill Color #DarkColor#,(#Alpha#*0.1)
DynamicVariables=1
UpdateDivider=8
LeftMouseUpAction=[!Enablemeasuregroup RAMMeasures][!SetVariable "current" "RAM"][!updatemetergroup information][!redraw][!updatemetergroup information][!redraw]
MouseOverAction=[!SetOption #CURRENTSECTION# This "Fill Color #DarkColor#,(#Alpha#*0.3)"][!UpdateMEter #CURRENTSECTION#][!redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# This "Fill Color #DarkColor#,(#Alpha#*0.1)"][!UpdateMEter #CURRENTSECTION#][!redraw]

[MeterRAMLabel]
Meter=String
Text=RAM
X=(10*#Scale#)r
Y=(18*#Scale#)r
StringAlign=leftcenter
MeterStyle=semiboldtext
UpdateDivider=-1

;[RAMTOP]
;Meter=String
;X=(#GlobalW#/2)
;Y=r
;MeasureName=MeasureRAMHigh
;Text=%1
;DynamicVariables=1
;FontSize=(10*#scale#)
;Container=container
;StringAlign=CenterCenter
;FontColor=#FontColor#,200
;MeterStyle=RegularText

[RAMPER]
Meter=String
MeasureName=MeasureUsedPercent
Text=%1%
X=(#globalW#-35*#scale#)
Y=r
FontSize=(10*#scale#)
StringAlign=RightCenter
MeterStyle=RegularText
Container=container
UpdateDivider=5

[CPUBox]
MEter=Shape
Y=(20*#scale#)R
UpdateDivider=1
Shape2=Rectangle 0,0,((#GlobalW#-(25*#scale#)*2-1)*[MeasureCPU:]*0.01),(40*#Scale#),(#Corner#*5),(#Corner#*5) | Fill Color #DarkColor#,(#Alpha#*0.3) | StrokeWidth 0
MeterStyle=RAMBox
LeftMouseUpAction=[!Enablemeasuregroup CPUMeasures][!SetVariable "current" "CPU"][!updatemetergroup information][!redraw][!updatemetergroup information][!redraw]

[MeterCPULabel]
Meter=String
Text=CPU
MeterStyle=semiboldtext | MeterRAMLabel

;[CPUTOP]
;Meter=String
;MeasureName=MeasureCPUHigh
;MeterStyle=RegularText | RAMTOP

[CPuPER]
Meter=String
Text=[MeasureCPU:1]%
DynamicVariables=1
MeterStyle=RegularText | RAMPER
UpdateDivider=1

[GPUBox]
MEter=Shape
Y=(20*#scale#)R
UpdateDivider=1
Shape2=Rectangle 0,0,((#GlobalW#-(25*#scale#)*2-1)*[MeasureGPU:]*0.01),(40*#Scale#),(#Corner#*5),(#Corner#*5) | Fill Color #DarkColor#,(#Alpha#*0.3) | StrokeWidth 0
MeterStyle=RAMBox
LeftMouseUpAction=[!Enablemeasuregroup GPUMeasures][!SetVariable "current" "GPU"][!CommandMeasure MeasureGPUName "Run"][!updatemetergroup information][!redraw]

[MeterGPULabel]
Meter=String
Text=GPU
MeterStyle=semiboldtext | MeterRAMLabel

;[GPUTOP]
;Meter=String
;MeasureName=MeasureGPUHigh
;MeterStyle=RegularText | RAMTOP

[GPUPER]
Meter=String
Text=[MeasureGPU:1]%
DynamicVariables=1
MeterStyle=RegularText | RAMPER
UpdateDivider=1

;;=====================================
;; current content
;;=====================================

[Headerimage]
Meter=image
x=(#GlobalW#/2-40*#scale#-[ramsize:w]/2)
y=(50*#scale#)r
w=(60*#scale#)
h=(60*#scale#)
Container=Container
DynamicVariables=-1
ImageName=#@#Icons\Global\#Current#.png
group=information

[ramsize]
meter=string
x=(10*#scale#)R
y=(30*#scale#)r
StringAlign=leftcenter
MeterStyle=RegularText
Autoscale=1k
DynamicVariables=-1
text=#Current# info#CRLF#%1
DynamicVariables=1
InlinePattern=(.*)#CRLF#
InlineSetting=weight | 500
measurename=Measure#current#Name
group=information


[ButtonsBisector]
Meter=Shape
Y=(55*#Scale#)r
MeterStyle=Bisector
Container=Container

[processesHeader]
meter=string
x=(25*#scale#)
y=(15*#scale#)r
MeasureName=MeasureProcesses
Text=List of processes (%1)
meterstyle=RegularText
fontweight=500
DynamicVariables=1

[listOfProcesses]
Meter=string
x=r
y=(35*#scale#)r
w=(200*#Scale#)
Text=%1#CRLF##CRLF#%2#CRLF##CRLF#%3#CRLF##CRLF#%4#CRLF##CRLF#%5#CRLF##CRLF#%6
ClipString=2
MeasureName=MeasureTopUsage1#Current#
MeasureName2=MeasureTopUsage2#Current#
MeasureName3=MeasureTopUsage3#Current#
MeasureName4=MeasureTopUsage4#Current#
MeasureName5=MeasureTopUsage5#Current#
MeasureName6=MeasureTopUsage6#Current#
InlinePattern=#CRLF#
InlineSetting=size | 10
DynamicVariables=1
MeterStyle=RegularText
group=information

[listOfUsage]
Meter=string
x=(235*#Scale#)
y=r
w=(100*#Scale#)
ClipString=2
InlinePattern=#CRLF#
InlineSetting=size | 10
FontColor=#Darkcolor#
DynamicVariables=1
MeterStyle=RegularText | #Current#usageStyle
group=information
[RAMusageStyle]
Text=%1B#CRLF##CRLF#%2B#CRLF##CRLF#%3B#CRLF##CRLF#%4B#CRLF##CRLF#%5B#CRLF##CRLF#%6B
MeasureName=CalcTopMemory1#Current#
MeasureName2=calctopMemory2#Current#
MeasureName3=calctopMemory3#Current#
MeasureName4=calctopMemory4#Current#
MeasureName5=calctopMemory5#Current#
MeasureName6=calctopMemory6#Current#
Autoscale=1K
[CPUusageStyle]
Text=[MeasureTopUsage1CPU:1]%#CRLF##CRLF#[MeasureTopUsage2CPU:1]%#CRLF##CRLF#[MeasureTopUsage3CPU:1]%#CRLF##CRLF#[MeasureTopUsage4CPU:1]%#CRLF##CRLF#[MeasureTopUsage5CPU:1]%#CRLF##CRLF#[MeasureTopUsage6CPU:1]%#CRLF##CRLF#
[GPUusageStyle]
Text=[MeasureTopUsage1GPU:1]%#CRLF##CRLF#[MeasureTopUsage2GPU:1]%#CRLF##CRLF#[MeasureTopUsage3GPU:1]%#CRLF##CRLF#[MeasureTopUsage4GPU:1]%#CRLF##CRLF#[MeasureTopUsage5GPU:1]%#CRLF##CRLF#[MeasureTopUsage6GPU:1]%#CRLF##CRLF#

[sideactionContainerStyle]
x=r
y=(9*#scale#)R
Container=container
shape2=Line (10*#Scale#),(10*#Scale#),(20*#Scale#),(20*#Scale#) | StrokeWidth 3 | stroke color #accent# | StrokeStartCap Round | StrokeEndCap Round
shape3=Line (20*#Scale#),(10*#Scale#),(10*#Scale#),(20*#Scale#) | StrokeWidth 3 | stroke color #accent# | StrokeStartCap Round | StrokeEndCap Round
shape=Rectangle 0,0,(30*#Scale#),(30*#Scale#),(#Corner#*5),(#Corner#*5) | StrokeWidth 0 | Extend this
this=Fill Color #DarkColor#,(#Alpha#*0.1)
DynamicVariables=1
MouseOverAction=[!SetOption #CURRENTSECTION# This "Fill Color #DarkColor#,(#Alpha#*0.3)"][!UpdateMEter #CURRENTSECTION#][!redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# This "Fill Color #DarkColor#,(#Alpha#*0.1)"][!UpdateMEter #CURRENTSECTION#][!redraw]
group=information
[sideActionContainer1]
MEter=Shape
X=(#GlobalW#-55*#scale#)
Y=r
MeterStyle=sideactionContainerStyle
LeftMouseUpAction=["#@#Actions\TaskKiller.exe" "[MeasureTopUsage1#Current#].exe"]
[sideActionContainer2]
MEter=Shape
MeterStyle=sideactionContainerStyle
LeftMouseUpAction=["#@#Actions\TaskKiller.exe" "[MeasureTopUsage2#Current#].exe"]
[sideActionContainer3]
MEter=Shape
MeterStyle=sideactionContainerStyle
LeftMouseUpAction=["#@#Actions\TaskKiller.exe" "[MeasureTopUsage3#Current#].exe"]
[sideActionContainer4]
MEter=Shape
MeterStyle=sideactionContainerStyle
LeftMouseUpAction=["#@#Actions\TaskKiller.exe" "[MeasureTopUsage4#Current#].exe"]
[sideActionContainer5]
MEter=Shape
MeterStyle=sideactionContainerStyle
LeftMouseUpAction=["#@#Actions\TaskKiller.exe" "[MeasureTopUsage5#Current#].exe"]
[sideActionContainer6]
MEter=Shape
MeterStyle=sideactionContainerStyle
LeftMouseUpAction=["#@#Actions\TaskKiller.exe" "[MeasureTopUsage6#Current#].exe"]

[temperaturebisector]
Meter=Shape
Y=(45*#Scale#)r
MeterStyle=Bisector
Container=Container

[Uptimetext]
meter=string
text=Uptime:#CRLF#%1
MeasureName=MeasureUptime
X=(#GlobalW#/2)
y=(40*#scale#)r
StringAlign=centercenter
MeterStyle=RegularText
FontColor=#Darkcolor#
InlinePattern=(.*)#CRLF#
InlineSetting=Weight | 500

;///////////////////////////////////////////////////////////////////////////////////////////////////
;                                              Measures
;///////////////////////////////////////////////////////////////////////////////////////////////////

;;=====================================
;; ram                                                                                                  
;;=====================================

[MeasureRAMName]
Measure=PhysicalMemory
Total=1
UpdateDivider=-1
[MeasurePhysMemUsed]
Measure=PhysicalMemory
UpdateDivider=5
[MeasureUsedPercent]
Measure=Calc
Formula=(MeasurePhysMemUsed / MeasureRAMName) * 100
UpdateDivider=5

;========================================
;Uptime
;========================================

[MeasureUptime]
Measure=Uptime
Format="%4!i! days, %3!i! hours, %2!i! minutes %1!i! seconds"

;;=====================================
;; cpu / gpu                                                                                                  
;;=====================================

[MeasureCPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Index=0
Substitute="^0$":"0.000001"
[MeasureGPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Index=0
Blacklist=dwm
DynamicVariables=1

;========================================
;Names
;========================================

[MeasureGPUName]
Measure=Plugin
Plugin=RunCommand
Parameter=wmic path win32_VideoController get name
State=Hide
OutputType=ANSI
OutputFile=Resource\GPUName.txt
RegExpSubstitute=1
FinishAction=[!updatemetergroup information][!redraw]
Substitute="Name.*#CRLF#":"","#CRLF#.*":"","  ":"","Radeon":"AMD Radeon","NVIDIA GeForce":"NVIDIA GeForce"
UpdateDivider=-1
[MeasureCPUName]
Measure=Registry
RegHKey=HKEY_LOCAL_MACHINE
RegKey=HARDWARE\DESCRIPTION\System\CentralProcessor\0
RegValue=ProcessorNameString
UpdateDivider=12000
RegExpSubstitute=1
Substitute="CPU":"","\(TM\)|\(tm\)|\(Tm\)":"","Processor":"","(\w{1,4}[\s\S]Core[s]?)":"","(Intel Core|Intel\(R\) Core)":"Intel(R) Core","@":"","AMD Ryzen ":"AMD Ryzen R"
UpdateDivider=-1

;;=====================================
;; topmeasures                                                                                                  
;;=====================================

[MeasureProcesses]
Measure=Plugin
Plugin=Perfmon
PerfMonObject="System"
PerfMonCounter="Processes"
PerfMonInstance=""
PerfMonDifference=0

;---------------------------------------------- RAM ----------------------------------------------

[MeasureTopUsage1RAM]
Measure=Plugin
Plugin=UsageMonitor
Alias=RAM
Percent=0
Index=1
Substitute="":"."
Group=RAMmeasures

[MeasureTopUsage2RAM]
Measure=Plugin
Plugin=UsageMonitor
Alias=RAM
Percent=0
Index=2
Substitute="":"."
Group=RAMmeasures

[MeasureTopUsage3RAM]
Measure=Plugin
Plugin=UsageMonitor
Alias=RAM
Percent=0
Index=3
Substitute="":"."
Group=RAMmeasures

[MeasureTopUsage4RAM]
Measure=Plugin
Plugin=UsageMonitor
Alias=RAM
Percent=0
Index=4
Substitute="":"."
Group=RAMmeasures

[MeasureTopUsage5RAM]
Measure=Plugin
Plugin=UsageMonitor
Alias=RAM
Percent=0
Index=5
Substitute="":"."
Group=RAMmeasures

[MeasureTopUsage6RAM]
Measure=Plugin
Plugin=UsageMonitor
Alias=RAM
Percent=0
Index=6
Substitute="":"."
Group=RAMmeasures

;---------------------------------------------- Calcs ----------------------------------------------

[CalcTopMemory1RAM]
Measure=Calc
Formula=MeasureTopUsage1RAM
Group=Process1
Group=RAMmeasures

[CalcTopMemory2RAM]
Measure=Calc
Formula=MeasureTopUsage2RAM
Group=Process2
Group=RAMmeasures

[CalcTopMemory3RAM]
Measure=Calc
Formula=MeasureTopUsage3RAM
Group=Process3
Group=RAMmeasures

[CalcTopMemory4RAM]
Measure=Calc
Formula=MeasureTopUsage4RAM
Group=Process4
Group=RAMmeasures

[CalcTopMemory5RAM]
Measure=Calc
Formula=MeasureTopUsage5RAM
Group=Process5
Group=RAMmeasures

[CalcTopMemory6RAM]
Measure=Calc
Formula=MeasureTopUsage6RAM
Group=Process6
Group=RAMmeasures

;---------------------------------------------- CPU ----------------------------------------------

[MeasureTopUsage1CPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Percent=1
Index=1
Substitute="":"."
Group=CPUMeasures
disabled=1

[MeasureTopUsage2CPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Percent=1
Index=2
Substitute="":"."
Group=CPUMeasures
disabled=1

[MeasureTopUsage3CPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Percent=1
Index=3
Substitute="":"."
Group=CPUMeasures
disabled=1

[MeasureTopUsage4CPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Percent=1
Index=4
Substitute="":"."
Group=CPUMeasures
disabled=1

[MeasureTopUsage5CPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Percent=1
Index=5
Substitute="":"."
Group=CPUMeasures
disabled=1

[MeasureTopUsage6CPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=CPU
Percent=1
Index=6
Substitute="":"."
Group=CPUMeasures
disabled=1

;---------------------------------------------- GPU ----------------------------------------------

[MeasureTopUsage1GPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Blacklist=#Blacklist#
Percent=0
Index=1
Substitute="":"."
Group=GPUMeasures
disabled=1

[MeasureTopUsage2GPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Blacklist=#Blacklist#
Percent=0
Index=2
Substitute="":"."
Group=GPUMeasures
disabled=1

[MeasureTopUsage3GPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Blacklist=#Blacklist#
Percent=0
Index=3
Substitute="":"."
Group=GPUMeasures
disabled=1

[MeasureTopUsage4GPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Blacklist=#Blacklist#
Percent=0
Index=4
Substitute="":"."
Group=GPUMeasures
disabled=1

[MeasureTopUsage5GPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Blacklist=#Blacklist#
Percent=0
Index=5
Substitute="":"."
Group=GPUMeasures
disabled=1

[MeasureTopUsage6GPU]
Measure=Plugin
Plugin=UsageMonitor
Alias=GPU
Blacklist=#Blacklist#
Percent=0
Index=6
Substitute="":"."
Group=GPUMeasures
disabled=1