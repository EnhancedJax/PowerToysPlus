[Rainmeter]
Update=1000
AccurateText=1
RIghtMOuseUpAction=[!SkinCustomMenu]
ContextTitle=Refresh
ContextAction=[!Refresh]
ContextTitle2=Settings
ContextAction2=[!ActivateConfig "PowerToys+\@settings" "dashboard.ini"][!UpdateMeasure Unload]
SkinWidth=#GlobalW#
SkinHeight=#GlobalH#
OnRefreshAction=[!WriteKeyValue #CURRENTCONFIG# Active 0 "%APPDATA%\Rainmeter\Rainmeter.ini"][!CommandMeasure GetProgramInfo "Run"]

[Variables]
@includeCommon=resource\Common.inc
@includeversion=#@#Version.inc
barhandler=5
boxW=(138*#Scale#)
current=

[SectionHeader]
text=Rainmeter information
[WinIcon]
ImageName=#@#icons\#IconPack#\rainmeter.png
[date]
StringAlign=Right

;///////////////////////////////////////////////////////////////////////////////////////////////////
;                                              Headere
;///////////////////////////////////////////////////////////////////////////////////////////////////

[HeaderImage]
meter=Image
x=(#GlobalW#/2-150*#Scale#/2)
y=(40*#Scale#)r
w=(150*#Scale#)
h=(150*#Scale#)
container=container
UpdateDivider=-1
imagename=#@#icons\global\rainmeterl.png

[title]
Meter=String
X=(#GlobalW#/2)
Y=(5*#Scale#)R
MeasureName=GetProgramVersion
Text=Rainmeter#CRLF#%1
FontSize=(#scale#*25)
FontWeight=450
StringEffect=shadow
StringAlign=center
MeterStyle=RegularText
InlinePattern=#CRLF#(.*)
InlineSetting=Size | (#scale#*12)
InlinePattern2=#CRLF#(.*)
InlineSetting2=color | #darkcolor#

[ButtonsBisector]
Meter=Shape
Y=(80*#Scale#)r
MeterStyle=Bisector
Container=Container

;///////////////////////////////////////////////////////////////////////////////////////////////////
;                                              Content
;///////////////////////////////////////////////////////////////////////////////////////////////////


[MonStyle]
X=((#boxW#/2-48*#Scale#/2)+20*#Scale#)R
Y=(-#boxW#/2.2/2+48*#Scale#/2)r
UpdateDivider=-1
Shape=Rectangle 0,0,#boxW#,(#boxW#/2.2),(#Corner#*3),(#Corner#*3) | StrokeWidth 1 | Stroke Color #BoxBorder#,(#Alpha#*0.5) | Extend This
Shape2=Rectangle (8*#Scale#),(7*#Scale#),(4*#Scale#),(#boxW#/2.2-7*2*#Scale#),(#Corner#*2),(#Corner#*2) | StrokeWidth 0 | Extend Monitor
Monitor=Fill Color 0,0,0,0
This=Fill Color #DarkColor#,(#Alpha#*0.3)
Container=Container
Group=Monboxes
MouseOverAction=[!SetOption #CURRENTSECTION# This "Fill Color #DarkColor#,(#Alpha#*0.5)"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# This "Fill Color #DarkColor#,(#Alpha#*0.3)"][!UpdateMeter #CURRENTSECTION#][!Redraw]
[MonIconStyle]
X=(#boxW#/2-48*#Scale#/2)r
Y=(#boxW#/2.2/2-48*#Scale#/2)r
W=(48*#Scale#)
DynamicVariables=1
UpdateDivider=-1
Container=Container
[MonTextStyle]
X=(20*#Scale#+#boxW#)r
Y=r
UpdateDivider=-1
StringAlign=Center
FontColor=#DarkColor#
FontSize=(9*#Scale#)
Container=Container
UpdateDivider=-1

[MonBox1]
Meter=Shape
x=(25*#Scale#)
y=(20*#Scale#)R
LeftMouseUpAction=[!Manage]
meterstyle=monstyle
[MonIcon1]
Meter=Image
ImageName=#@#Icons\Global\Manage.png
MeterStyle=MonIconStyle
[MonBox2]
Meter=Shape
meterstyle=monstyle
LeftMouseUpAction=[!About]
[MonIcon2]
Meter=Image
ImageName=#@#Icons\Global\Logs.png
MeterStyle=MonIconStyle
[MonBox3]
Meter=Shape
LeftMouseUpAction=[!about skins]
meterstyle=monstyle
[MonIcon3]
Meter=Image
ImageName=#@#Icons\Global\Skins.png
MeterStyle=MonIconStyle
[MonText1]
Meter=String
X=(25*#Scale#+#boxW#/2)
Y=(60*#Scale#)r
Text=Manage
MeterStyle=RegularText | MonTextStyle
[MonText2]
Meter=String
Text=Logs
MeterStyle=RegularText | MonTextStyle
[MonText3]
Meter=String
Text=Skins
MeterStyle=RegularText | MonTextStyle



[RMPath]
meter=string
x=(25*#Scale#)
y=(60*#Scale#)r
text=Program path
meterstyle=regulartext
StringAlign=leftcenter
UpdateDivider=-1
[RMSkinpath]
meter=string
x=r
y=(35*#Scale#)r
text=Skins path
meterstyle=regulartext
StringAlign=leftcenter
UpdateDivider=-1
[RMSettingspath]
meter=string
x=r
y=(35*#Scale#)r
text=Settings folder path
meterstyle=regulartext
StringAlign=leftcenter
UpdateDivider=-1
[RMsettingsini]
meter=string
x=r
y=(35*#Scale#)r
text=Settings ini
meterstyle=regulartext
StringAlign=leftcenter
UpdateDivider=-1


[pathstyle]
fontcolor=#darkcolor#
StringAlign=rightcenter
InlineSetting=underline | 1
x=r
y=(35*#Scale#)r
w=(#GlobalW#-50*#scale#)
h=(40*#Scale#)
fontsize=(10*#Scale#)
UpdateDivider=-1
[RMPath2]
meter=string
x=(#globalW#-25*#Scale#)
y=[RMPath:y]
text=#PROGRAMPATH#
meterstyle=regulartext | pathstyle
MouseOverAction=[!SetVariable "current" "#PROGRAMPATH#"][!showmetergroup pathactions][!SetOption pathactions y [#CURRENTSECTION#:Y]][!UpdateMetergroup PathActions][!redraw]
[RMSkinpath2]
meter=string
text=#SKINSPATH#
meterstyle=regulartext | pathstyle
MouseOverAction=[!SetVariable "current" "#SKINSPATH#"][!showmetergroup pathactions][!SetOption pathactions y [#CURRENTSECTION#:Y]][!UpdateMetergroup PathActions][!redraw]
[RMSettingspath2]
meter=string
text=#SETTINGSPATH#
meterstyle=regulartext | pathstyle
MouseOverAction=[!SetVariable "current" "#SETTINGSPATH#"][!showmetergroup pathactions][!SetOption pathactions y [#CURRENTSECTION#:Y]][!UpdateMetergroup PathActions][!redraw]
[RMsettingsini2]
meter=string
text=Rainmeter.ini
meterstyle=regulartext | pathstyle
MouseOverAction=[!SetVariable "current" "#SETTINGSPATH#\Rainmeter.ini"][!showmetergroup pathactions][!SetOption pathactions y [#CURRENTSECTION#:Y]][!UpdateMetergroup PathActions][!redraw]










[PathActions]
MEter=shape
X=(25*#scale#)
container=container
UpdateDivider=-1
hidden=1
group=PathActions
MouseLeaveAction=[!hidemetergroup PathActions][!redraw]
shape=Rectangle 0,0,(#GlobalW#-50*#scale#),(40*#scale#),(#Corner#*5),(#Corner#*5) | Fill Color #boxcolor# | StrokeWidth 0
shape2=Rectangle ((#GlobalW#-50*#scale#)/2-15*#scale#-100*#scale#),(5*#scale#),(100*#scale#),(30*#scale#),(#Corner#*5),(#Corner#*5) | StrokeWidth 0 | extend this
shape3=Rectangle ((#GlobalW#-50*#scale#)/2+15*#scale#),(5*#scale#),(100*#scale#),(30*#scale#),(#Corner#*5),(#Corner#*5) | StrokeWidth 0 | extend that
this=Fill Color #darkcolor#,(#alpha#*0.2)
that=Fill Color #darkcolor#,(#alpha#*0.2)

[OpenText]
MEter=String
X=((#GlobalW#-50*#scale#)/2-65*#scale#)r
y=(18*#scale#)r
W=(100*#scale#)
h=(30*#scale#)
MouseOverAction=[!setoption PathActions this "Fill Color #darkcolor#,(#alpha#*0.5)"][!updatemeter pathactions][!redraw]
MouseLeaveAction=[!setoption PathActions this "Fill Color #darkcolor#,(#alpha#*0.2)"][!updatemeter pathactions][!redraw]
LeftMouseUpAction=["#current#"]
Text=Open
hidden=1
group=PathActions
StringAlign=centercenter
UpdateDivider=-1
meterstyle=RegularText
DynamicVariables=1
[COpyTest]
MEter=String
X=(130*#scale#)r
y=r
W=(100*#scale#)
h=(30*#scale#)
MouseOverAction=[!setoption PathActions that "Fill Color #darkcolor#,(#alpha#*0.5)"][!updatemeter pathactions][!redraw]
MouseLeaveAction=[!setoption PathActions that "Fill Color #darkcolor#,(#alpha#*0.2)"][!updatemeter pathactions][!redraw]
LeftMouseUpAction=[!setclip "#current#"]
Text=Copy
hidden=1
group=PathActions
StringAlign=centercenter
UpdateDivider=-1
meterstyle=RegularText
DynamicVariables=1





[subtitle]
Meter=String
X=(#GlobalW#/2)
Y=(#GlobalH#-70*#scale#)
meterstyle=RegularText
FontColor=#DarkColor#
StringAlign=CenterBottom
Text=PowerToys+ v#version#
UpdateDivider=-1



;///////////////////////////////////////////////////////////////////////////////////////////////////
;                                              Measures
;///////////////////////////////////////////////////////////////////////////////////////////////////

[GetProgramInfo]
Measure=Plugin
Plugin=RunCommand
Program=""#@#actions\sigcheck.exe" "#programpath#Rainmeter.exe""
State=Hide
OutputType=ANSI
FinishAction=[!UpdateMeasure GetProgramVersion][!updatemeter title][!redraw]
[GetProgramVersion]
Measure=String
String=[GetProgramInfo]
DynamicVariables=1
RegExpSubstitute=1
UpdateDivider=-1
Substitute="(?siU)^.*Prod version:\t(.*)\n.*$":"\1","#CRLF#":""